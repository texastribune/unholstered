{% extends 'base.html' %}

{% from 'macros/prose.html' import prose %}
{% from 'macros/authors.html' import authors %}
{% import 'macros/shares.html' as shares %}

{% block body_class %}mainbar-body bg-lightblue{% endblock %}

{% block masthead_class %}masthead-mainbar{% endblock %}

{% set context = data.findings %}

{% block swiper_bar %}
<div class="swiper-progress"></div>
{% endblock %}

{% block masthead_color %}{% endblock %}

{% block content %}

<div class="mainbar-container">
  <div id="swiper-container" class="swiper-container">
    <div class="graphic-container">
      <div id="graphic"></div>
    </div>
    <div class="swiper-wrapper">
      <div class="swiper-slide" data-primary-color="lightblue" data-type="text-only">
        <div class="slide-content slide-content--flex">
          <div class="splash-art slide-content--flex-child">{{ inject('assets/images/illustrations/intro-image.svg') }}</div>
          <header class="splash-header slide-content--flex-child">
            <h1 class="splash-header__title">Unholstered</h1>
            <p class="splash-header__subtitle">{{ data.findings.subhead }}</p>
          </header>
        </div>
      </div>
      {% for slide in context.intro_slides %}
      <div class="swiper-slide" data-primary-color="lightblue" data-type="text-only">
        <div class="slide-content">
          <div class="slide-prose">
            {{ prose(slide.prose) }}
          </div>
        </div>
      </div>
      {% endfor %}
      {% for slide in context.slides %}
      <div class="swiper-slide{% if slide.chart_type %} swiper-slide--graphic{% endif %}" data-primary-color="{{ slide.color }}" data-type="{{ slide.chart_type }}" data-slide-index="{{ loop.index }}">
        <div class="slide-content{% if slide.chart_type %} slide-content--graphic{% endif %}">
          <div class="slide-prose">
            <h2 class="slide-prose__header">{{ slide.head }}</h2>
            {{ prose(slide.prose) }}
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>

{#
  <!-- This is the previous verison of the slides - saving for now -->
  <div class="mainbar-container">
  <div class="swiper-container">
    <div class="graphic-container">
      <div id="graphic"></div>
    </div>
    <div class="swiper-wrapper">
      <div class="swiper-slide slide-intro bg-lightblue">
        <div class="swiper-slide__section slide-intro__art">{{ inject('assets/images/illustrations/intro-image.svg') }}</div>
        <div class="swiper-slide__section slide-intro__head">
          <div>
            <h1 class="slide-intro__title">Unholstered</h1>
            <h4 class="slide-intro__tag">{{ data.findings.subhead }}</h4>
          </div>
        </div>
      </div>
      <div class="swiper-slide slide-intro-text bg-lightblue">
        {{ prose(data.findings.intro) }}
      </div>
    {% for slide in data.findings.slides %}
    <div class="swiper-slide swiper-slide--content bg-{{ slide.color }}">
      <div class="slide-graphic swiper-slide__section">
        <div class="graphic graphic-hook-{{ loop.index + 1 }}"></div>
      </div>
      <div class="swiper-slide__section swiper-slide__section--prose">
        <div class="slide-prose">
          <h3 class="slide-head">{{ slide.head }}</h3>
          <div class="slide-text">{{ prose(slide.prose) }}</div>
        </div>
      </div>
    </div>
    {% endfor %}
      <div class="swiper-slide slide-footer bg-lightblue">
        {{ prose(data.findings.closer) }}
      </div>
    </div>
  </div>
</div> #}

<div class="slider-controls">
  <button id="prev-button" class="slider-controls__button btn btn--transparent btn--large is-hidden"><div class="icon">{{ inject('assets/images/arrow-up.svg') }}</div></button>
  <button id="next-button" class="slider-controls__button btn btn--transparent btn--large"><span class="js-next-button-text">Begin</span> <div class="icon icon--animated">{{ inject('assets/images/arrow-down.svg') }}</div></button>
</div>

{% endblock content %}

{% block footer %}{% endblock footer %}

{% block scripts %}
{{ super() }}
<script src="{{ static('scripts/mainbar.js') }}"></script>
{% endblock scripts %}
